# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ú–∏–≥—Ä–∞—Ü–∏—è MVP ‚Üí Production

**–ü—Ä–æ–µ–∫—Ç:** MegaCampusAI - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
**–í–µ—Ä—Å–∏—è:** 1.1
**–î–∞—Ç–∞:** 2025-10-10
**–°—Ç–∞—Ç—É—Å:** Draft

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±—â–∏–π –æ–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#1-–æ–±—â–∏–π-–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ MVP](#2-—Ç–µ–∫—É—â–µ–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ-mvp)
3. [–¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Production](#3-—Ü–µ–ª–µ–≤–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-production)
4. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#4-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
5. [–≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#5-—ç—Ç–∞–ø—ã-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
6. [–ë—É–¥—É—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (Roadmap)](#6-–±—É–¥—É—â–∏–π-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª-roadmap)
7. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#7-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
8. [–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è](#8-–º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è)
9. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞—á–µ—Å—Ç–≤—É](#9-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-–∫–∞—á–µ—Å—Ç–≤—É)

---

## 1. –û–±—â–∏–π –æ–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### 1.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

MegaCampusAI - B2B –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.

### 1.2 –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è

- **–û—Å–Ω–æ–≤–Ω–∞—è:** –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- **–í—Ç–æ—Ä–∏—á–Ω–∞—è:** –í–Ω–µ—à–Ω–∏–µ LMS-—Å–∏—Å—Ç–µ–º—ã (—á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é)

### 1.3 –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

**–¢–µ–∫—É—â–∏–µ (MVP):**

- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ:
  - –¢–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è
  - –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (PDF, DOCX, TXT –∏ –¥—Ä.)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤: —Ç–µ–∫—Å—Ç, –∞—É–¥–∏–æ, –≤–∏–¥–µ–æ, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏, —Ç–µ—Å—Ç—ã
- –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (–æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫: —Ä—É—Å—Å–∫–∏–π)

**Production (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è):**

- –î–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ LMS
- –ü–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ–º —ç—Ç–∞–ø–æ–≤
- AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤ –∫—É—Ä—Å–æ–≤
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —É—á–∞—â–∏—Ö—Å—è (roadmap)
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ–±—É—á–µ–Ω–∏—è (roadmap)

### 1.4 –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å

**B2B SaaS —Å —Ç–∞—Ä–∏—Ñ–∞–º–∏:**

- –¢–∞—Ä–∏—Ñ—ã —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–∫—É–ø–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∞—Ä–∏—Ñ–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —É—á–∞—â–∏—Ö—Å—è

---

## 2. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ MVP

### 2.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MVP

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Next.js 15     ‚îÇ  ‚Üê Frontend (courseai-next)
‚îÇ  + Supabase     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ Webhook (HMAC)
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  n8n Workflows  ‚îÇ  ‚Üê –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è (6 workflows)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Supabase DB    ‚îÇ  ‚Üê PostgreSQL + pgvector
‚îÇ  Google Drive   ‚îÇ  ‚Üê –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤
‚îÇ  OpenRouter API ‚îÇ  ‚Üê AI –º–æ–¥–µ–ª–∏ (Grok4Fast, ChatGPT OSS120B)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.2 n8n Workflows (—Ç–µ–∫—É—â–∏–µ)

1. **Main Entry** - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
   - üìÑ `workflows n8n/CAI CourseGen - Main Entry (18).json`

2. **Document Processing** - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   - üìÑ `workflows n8n/CAI CourseGen - Document Processing (36).json`

3. **Create Summary** - –°–æ–∑–¥–∞–Ω–∏–µ —Å–∞–º–º–∞—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - üìÑ `workflows n8n/CAI CourseGen - Create Summary (14).json`

4. **Course Structure Analyze** - –ê–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - üìÑ `workflows n8n/CAI CourseGen - Course Structure Analyze (23).json`

5. **Course Structure Generate** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫—É—Ä—Å–∞
   - üìÑ `workflows n8n/CAI CourseGen - Course Structure generate (27).json`

6. **Text Generation (NEW)** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —É—Ä–æ–∫–æ–≤
   - üìÑ `workflows n8n/CAI CourseGen - Text generation (NEW) (1).json`

**Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**

- üé® –°–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–∞: `courseai-next/app/create/page.tsx`
- üé® Server Actions: `courseai-next/app/actions/courses.ts`
- üîó Webhook endpoint: `courseai-next/app/api/webhooks/coursegen/route.ts`
- üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: `courseai-next/app/courses/generating/[slug]/page.tsx`

### 2.3 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ MVP

**Frontend:**

- Next.js 15.5 (App Router)
- Tailwind CSS v4
- Supabase Client (SSR + Client)
- shadcn/ui

**Backend (n8n):**

- n8n workflows
- Google Drive API
- OpenRouter (Grok4Fast, ChatGPT OSS120B)
- Google text-embedding-004 (embeddings)
- Supabase PostgreSQL + pgvector

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

- Supabase (—Å—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç: mmtpvtoifqpdcgiwwdvj)
  - **MCP –¥–æ—Å—Ç—É–ø:** `mcp__supabase-legacy__*` (–≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)
- Google Drive (—Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
- n8n Cloud (flow8n.ru)
  - **MCP –¥–æ—Å—Ç—É–ø:** `mcp__n8n-mcp__*` (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ workflows, nodes, templates)

### 2.4 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP

- ‚ùå –ü—Ä–∏–≤—è–∑–∫–∞ –∫ n8n (vendor lock-in)
- ‚ùå –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Google Drive
- ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä AI –º–æ–¥–µ–ª–µ–π
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –æ—á–µ—Ä–µ–¥–µ–π
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ LMS
- ‚ùå –ù–µ—Ç –ø–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚ùå –ù–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —É—á–∞—â–∏—Ö—Å—è
- ‚ùå –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã)

---

## 3. –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Production

### 3.1 –û–±—â–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Frontend Layer                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ Next.js App  ‚îÇ         ‚îÇ  External LMS    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ (courseai)   ‚îÇ         ‚îÇ  (Integration)   ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                          ‚îÇ
          ‚Üì                          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              API Gateway / tRPC Server            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Authentication, Rate Limiting, CORS    ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Orchestration Layer (Main Entry)       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ  Queue System (BullMQ / Temporal)        ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Job scheduling                        ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Retry logic                           ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Progress tracking                     ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Cancellation support                  ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ
           ‚Üì          ‚Üì          ‚Üì          ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Processing Workers                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇDocument‚îÇ  ‚îÇSummary ‚îÇ  ‚îÇAnalyze ‚îÇ  ‚îÇGenerate‚îÇ ‚îÇ
‚îÇ  ‚îÇProcess ‚îÇ  ‚îÇCreator ‚îÇ  ‚îÇWorker  ‚îÇ  ‚îÇWorker  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 AI / Services Layer               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ OpenRouter   ‚îÇ  ‚îÇ  Vector DB (pgvector)    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ (Multi-model)‚îÇ  ‚îÇ  (Context retrieval)     ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ HeyGen API   ‚îÇ  ‚îÇ  File Processing Service ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ (Video gen)  ‚îÇ  ‚îÇ  (Extract, chunk, embed) ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 Data Layer                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  Supabase    ‚îÇ  ‚îÇ  Local File Storage      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  (NEW)       ‚îÇ  ‚îÇ  (Server filesystem)     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Metadata  ‚îÇ  ‚îÇ  - Uploaded files        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Vectors   ‚îÇ  ‚îÇ  - Generated assets      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Progress  ‚îÇ  ‚îÇ                          ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2 –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**1. –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å:**

- –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å - –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª (max 200-300 —Å—Ç—Ä–æ–∫)
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**2. –ü–æ—ç—Ç–∞–ø–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- –ö–∞–∂–¥—ã–π workflow —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- Integration —Ç–µ—Å—Ç—ã –¥–ª—è workflow

**3. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**

- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ workers
- –û—á–µ—Ä–µ–¥–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–æ–π
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

**4. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1):**

- Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã
- Graceful degradation
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## 4. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### 4.1 Frontend (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

**–û—Å–Ω–æ–≤–Ω–æ–π:**

- Next.js 15.5 (App Router)
- TypeScript (strict mode)
- Tailwind CSS v4

**UI:**

- shadcn/ui
- Radix UI
- Framer Motion

**State & Forms:**

- Zustand (–≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
- React Hook Form + Zod

### 4.2 Backend (NEW - –ø–µ—Ä–µ—Ö–æ–¥ —Å n8n –Ω–∞ –∫–æ–¥)

**Runtime:**

- Node.js 20+
- TypeScript

**API Layer:**

- tRPC (type-safe API)
- Next.js API Routes (webhooks, –ø—É–±–ª–∏—á–Ω—ã–µ endpoints)

**Orchestration (–≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω):**

- ‚úÖ **BullMQ** (Redis-based, –ø—Ä–æ—Å—Ç–æ–π, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π)
- ‚ö†Ô∏è **Temporal** (—Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –æ–≤–µ—Ä–∫–∏–ª–ª –Ω–∞ —Å—Ç–∞—Ä—Ç–µ)
- ‚ö†Ô∏è **Inngest** (event-driven, —Ö–æ—Ä–æ—à–æ, –Ω–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–∞—Ç—å —Å **BullMQ** + Redis

**AI / Embeddings (–≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω):**

- ‚úÖ **LangChain.js** (ecosystem, –º–Ω–æ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π)
- ‚úÖ **LlamaIndex.js** (RAG, –¥–æ–∫—É–º–µ–Ω—Ç—ã - –≤–æ–∑–º–æ–∂–Ω–æ –ª—É—á—à–µ –¥–ª—è –Ω–∞—Å)
- ‚ö†Ô∏è **Vercel AI SDK** (–ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –º–µ–Ω–µ–µ –≥–∏–±–∫–∏–π)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å **LlamaIndex.js** –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É LangChain –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

### 4.3 Data Layer

**Database:**

- ‚úÖ Supabase PostgreSQL (–Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç)
  - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫—É—Ä—Å–æ–≤
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ç–∞—Ä–∏—Ñ—ã
  - –ü—Ä–æ–≥—Ä–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  - –í–µ–∫—Ç–æ—Ä—ã (pgvector)
  - **MCP –¥–æ—Å—Ç—É–ø:** `mcp__supabase__*` (–≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)
  - **–†–µ—Ñ–µ—Ä–µ–Ω—Å —Å—Ç–∞—Ä–æ–≥–æ:** `mcp__supabase-legacy__*` (–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

**–†–µ—à–µ–Ω–∏–µ –ø–æ —Ö—Ä–∞–Ω–µ–Ω–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∫—É—Ä—Å–æ–≤: PostgreSQL —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π**

**–ü–æ–¥—Ö–æ–¥:** –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ —Ä–∞–∑–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

**–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

```sql
-- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫—É—Ä—Å–∞ (–ª–µ–≥–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
CREATE TABLE courses (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  slug TEXT UNIQUE,
  user_id UUID REFERENCES auth.users(id),
  organization_id UUID, -- –¥–ª—è multi-tenancy
  status TEXT NOT NULL DEFAULT 'draft', -- draft, generating, ready, published
  settings JSONB, -- –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, —è–∑—ã–∫, —Å–ª–æ–∂–Ω–æ—Å—Ç—å
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  metadata JSONB -- –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
);
CREATE INDEX idx_courses_user_id ON courses(user_id);
CREATE INDEX idx_courses_organization_id ON courses(organization_id);
CREATE INDEX idx_courses_status ON courses(status);

-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–¥–µ–ª–æ–≤ (—Å–µ–∫—Ü–∏–π) –∫—É—Ä—Å–∞
CREATE TABLE sections (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  course_id UUID NOT NULL REFERENCES courses(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  description TEXT,
  order_index INTEGER NOT NULL,
  metadata JSONB, -- –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–∏
  created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_sections_course_id ON sections(course_id);
CREATE INDEX idx_sections_order ON sections(course_id, order_index);

-- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–æ–≤ (–ë–ï–ó —Ç—è–∂–µ–ª–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞!)
CREATE TABLE lessons (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  section_id UUID NOT NULL REFERENCES sections(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  order_index INTEGER NOT NULL,
  duration_minutes INTEGER,
  lesson_type TEXT, -- text, video, audio, quiz, presentation
  status TEXT DEFAULT 'pending', -- pending, generating, ready
  metadata JSONB, -- –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ —Ç.–¥.
  created_at TIMESTAMPTZ DEFAULT NOW()
);
CREATE INDEX idx_lessons_section_id ON lessons(section_id);
CREATE INDEX idx_lessons_order ON lessons(section_id, order_index);

-- –ö–û–ù–¢–ï–ù–¢ —É—Ä–æ–∫–æ–≤ (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏!)
CREATE TABLE lesson_content (
  lesson_id UUID PRIMARY KEY REFERENCES lessons(id) ON DELETE CASCADE,
  text_content TEXT, -- –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
  media_urls JSONB, -- —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
  quiz_data JSONB, -- –¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤
  interactive_elements JSONB, -- –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
-- –ò–Ω–¥–µ–∫—Å –Ω–µ –Ω—É–∂–µ–Ω - –≤—Å–µ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å –ø–æ PRIMARY KEY
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**

1. **–ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫—É—Ä—Å–æ–≤, —Å–µ–∫—Ü–∏–π –∏ —É—Ä–æ–∫–æ–≤ –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—è–∂–µ–ª–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
2. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (Lazy Loading)** - –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —É—Ä–æ–∫
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏** - API –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫—É—Ä—Å–∞ –∑–∞ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ø—Ä–∏ —Ä–æ—Å—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ `lesson_content` –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
5. **ACID –≥–∞—Ä–∞–Ω—Ç–∏–∏** - —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ PostgreSQL
6. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (MongoDB, Redis)

**–¢–∏–ø–∏—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**

```typescript
// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫—É—Ä—Å–∞ (–±—ã—Å—Ç—Ä–æ!)
const course = await db
  .select()
  .from(courses)
  .leftJoin(sections, eq(sections.courseId, courses.id))
  .leftJoin(lessons, eq(lessons.sectionId, sections.id))
  .where(eq(courses.id, courseId));
// –ö–æ–Ω—Ç–µ–Ω—Ç —É—Ä–æ–∫–æ–≤ –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è!

// –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Ä–æ–∫–∞ (–ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)
const content = await db
  .select()
  .from(lessonContent)
  .where(eq(lessonContent.lessonId, lessonId))
  .limit(1);
```

**–ë—É–¥—É—â–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):**

- Redis –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –∫—É—Ä—Å–æ–≤
- CDN –¥–ª—è media_urls
- Read replicas –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**File Storage:**

- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞—á–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: `/uploads/{userId}/{courseId}/{fileId}`
- –ü–æ–∑–∂–µ: S3-compatible (Supabase Storage, Cloudflare R2)

**–í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î:**

- pgvector (extension –≤ Supabase PostgreSQL)

### 4.4 AI & External APIs

**OpenRouter:**

- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –º–æ–¥–µ–ª—è–º
- –ê–¥–º–∏–Ω–∫–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π per use-case
- Fallback –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–ø–æ–∑–∂–µ):**

- HeyGen (–≤–∏–¥–µ–æ)
- ElevenLabs / OpenAI TTS (–∞—É–¥–∏–æ)
- reveal.js / Slidev (–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏)

### 4.5 –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–û–∫—Ä—É–∂–µ–Ω–∏—è:**

- Development (–ª–æ–∫–∞–ª—å–Ω–æ)
- Staging (pre-production —Ç–µ—Å—Ç—ã)
- Production

**CI/CD:**

- GitHub Actions (–∏–ª–∏ GitLab CI)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
- Deploy –Ω–∞ VPS / Railway / Vercel

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**

- Sentry (errors)
- Prometheus + Grafana (–º–µ—Ç—Ä–∏–∫–∏) –ò–õ–ò Upstash (–ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
- Custom dashboard –≤ –∞–¥–º–∏–Ω–∫–µ

---

## 5. –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 5.1 –ü—Ä–∏–Ω—Ü–∏–ø –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

–ö–∞–∂–¥—ã–π n8n workflow = –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç—Ç–∞–ø —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–æ —Å–≤–æ–∏–º –º–∏–Ω–∏-–¢–ó:

```
Main Entry ‚Üí Document Processing ‚Üí Create Summary ‚Üí
Analyze ‚Üí Generate ‚Üí Text Generation
```

### 5.2 Workflow 1: Main Entry ‚Üí Orchestrator

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞ –∑–∞–º–µ–Ω—É n8n Main Entry

**–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã:**

- üìÑ n8n workflow: `workflows n8n/CAI CourseGen - Main Entry (18).json`
- üé® Frontend webhook: `courseai-next/app/api/webhooks/coursegen/route.ts`
- üé® Server Actions: `courseai-next/app/actions/courses.ts`

**–ó–∞–¥–∞—á–∏:**

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å BullMQ + Redis
2. –°–æ–∑–¥–∞—Ç—å job types –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å HMAC –≤–∞–ª–∏–¥–∞—Ü–∏—é (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–∏–º —Ñ—Ä–æ–Ω—Ç–æ–º)
4. Progress tracking —á–µ—Ä–µ–∑ Supabase
5. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–º–µ–Ω—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–∫—É—â–∏–º Next.js frontend

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –†–∞–±–æ—Ç–∞—é—â–∏–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
- –ë–∞–∑–æ–≤–∞—è –∞–¥–º–∏–Ω–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞/–æ—Ç–º–µ–Ω—ã
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –¢–ó –¥–ª—è —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞ (–æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç)

### 5.3 Workflow 2: Document Processing

**–¶–µ–ª—å:** –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –∫–æ–¥

**–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã:**

- üìÑ n8n workflow: `workflows n8n/CAI CourseGen - Document Processing (36).json`
- üé® Frontend upload: `courseai-next/app/create/page.tsx`

**–ó–∞–¥–∞—á–∏:**

1. File upload –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (PDF, DOCX, TXT –∏ —Ç.–¥.)
3. Chunking (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏)
4. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ OpenRouter embeddings
5. Content hashing (–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è)
6. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ file_catalog, file_vectors

**AI –≤–æ–ø—Ä–æ—Å—ã (—Ä–µ—à–∞–µ–º –≤–º–µ—Å—Ç–µ):**

- –ú–æ–¥–µ–ª—å –¥–ª—è embeddings
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è chunking
- –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –†–∞–±–æ—Ç–∞—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–∞–π–ª–æ–≤
- Unit + integration —Ç–µ—Å—Ç—ã
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –¢–ó –¥–ª—è —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞

### 5.4 Workflow 3: Create Summary

**–¶–µ–ª—å:** Map-Reduce —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã:**

- üìÑ n8n workflow: `workflows n8n/CAI CourseGen - Create Summary (14).json`

**–ó–∞–¥–∞—á–∏:**

1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ —á–∞—Å—Ç–∏
2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —á–∞–Ω–∫–æ–≤
3. –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ summary
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

**AI –≤–æ–ø—Ä–æ—Å—ã (—Ä–µ—à–∞–µ–º –≤–º–µ—Å—Ç–µ):**

- –ú–æ–¥–µ–ª—å –¥–ª—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–º–ø—Ç—ã
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è Map-Reduce

### 5.5 Workflow 4: Course Structure Analyze

**–¶–µ–ª—å:** –ê–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã:**

- üìÑ n8n workflow: `workflows n8n/CAI CourseGen - Course Structure Analyze (23).json`

**–ó–∞–¥–∞—á–∏:**

1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (topic + documents summary)
2. RAG –∑–∞–ø—Ä–æ—Å –∫ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
4. **–ü–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º:** –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∞–≤–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑

**AI –≤–æ–ø—Ä–æ—Å—ã (—Ä–µ—à–∞–µ–º –≤–º–µ—Å—Ç–µ):**

- –ú–æ–¥–µ–ª—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- –ü—Ä–æ–º–ø—Ç—ã
- RAG —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**

- LMS API –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è (–µ—Å–ª–∏ –ø–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç)

### 5.6 Workflow 5: Course Structure Generate

**–¶–µ–ª—å:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫—É—Ä—Å–∞

**–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã:**

- üìÑ n8n workflow: `workflows n8n/CAI CourseGen - Course Structure generate (27).json`

**–ó–∞–¥–∞—á–∏:**

1. –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è sections + lessons
3. **–ü–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º:** –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**

- LMS API –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è

### 5.7 Workflow 6: Text Generation

**–¶–µ–ª—å:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —É—Ä–æ–∫–æ–≤

**–†–µ—Ñ–µ—Ä–µ–Ω—Å—ã:**

- üìÑ n8n workflow: `workflows n8n/CAI CourseGen - Text generation (NEW) (1).json`
- üé® –ü—Ä–æ–≥—Ä–µ—Å—Å UI: `courseai-next/app/courses/generating/[slug]/page.tsx`

**–ó–∞–¥–∞—á–∏:**

1. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ä–æ–∫–æ–≤ (batching)
2. RAG –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. Retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
5. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** AI-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ø—Ä–∞–≤–æ–∫

**AI –≤–æ–ø—Ä–æ—Å—ã (—Ä–µ—à–∞–µ–º –≤–º–µ—Å—Ç–µ):**

- –ú–æ–¥–µ–ª–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (—Ä–∞–∑–Ω—ã–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
- –ü—Ä–æ–º–ø—Ç—ã
- Batching —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**

- AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤ (–¥–æ—Å—Ç—É–ø –∫ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î, –∫–æ–Ω—Ç–µ–∫—Å—Ç)

---

## 6. –ë—É–¥—É—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (Roadmap)

> **–í–∞–∂–Ω–æ:** –≠—Ç–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ù–ï –≤—Ö–æ–¥—è—Ç –≤ —Ç–µ–∫—É—â—É—é –º–∏–≥—Ä–∞—Ü–∏—é. –ü—Ä–æ–¥—É–º—ã–≤–∞—é—Ç—Å—è –∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –ø–æ–∑–∂–µ.

### 6.1 –ú—É–ª—å—Ç–∏—Ñ–æ—Ä–º–∞—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

**–§–æ—Ä–º–∞—Ç—ã:**

- ‚úÖ –¢–µ–∫—Å—Ç (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- ‚è≥ –ê—É–¥–∏–æ (TTS —á–µ—Ä–µ–∑ ElevenLabs/OpenAI)
- ‚è≥ –í–∏–¥–µ–æ (HeyGen API)
- ‚è≥ –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ (reveal.js generation)
- ‚è≥ –¢–µ—Å—Ç—ã (AI-generated quizzes)

**–ü–æ–¥—Ö–æ–¥:**

- –û—Ç–¥–µ–ª—å–Ω—ã–µ workers –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
- Unified API –¥–ª—è LMS
- –¢–æ–∫–µ–Ω—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 6.2 –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —É—á–∞—â–∏—Ö—Å—è

**–¶–µ–ª—å:** –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—É—á–µ–Ω–∏—è

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —É—Ä–æ–∫–æ–≤
- –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤
- –í—ã—è–≤–ª–µ–Ω–∏–µ —Å–∏–ª—å–Ω—ã—Ö/—Å–ª–∞–±—ã—Ö —Å—Ç–æ—Ä–æ–Ω
- –û—Ü–µ–Ω–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –æ–±—É—á–µ–Ω–∏—è

**AI Workflow:**

- –û—Ç–¥–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞ –±–∞–∑–µ –∏—Å—Ç–æ—Ä–∏–∏ –æ–±—É—á–µ–Ω–∏—è
- –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è —É—á–∞—â–µ–≥–æ—Å—è
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫—É—Ä—Å–∞–º

### 6.3 –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –£—Ç—Ä–µ–Ω–Ω–∏–µ 20-–º–∏–Ω—É—Ç–Ω—ã–µ —É—Ä–æ–∫–∏

**–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è:**

- –ü–æ–¥–±–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ–¥ —Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å—Ç–∏–ª—è –æ–±—É—á–µ–Ω–∏—è (–Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Å—Ç–æ–≤)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è micro-learning –ø—É—Ç–µ–π

**–î–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**

- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–π
- –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

### 6.4 –ü–æ—Ä—Ç—Ä–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

- –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π
- –°–∏–ª—å–Ω—ã–µ/—Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
- –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫—É—Ä—Å—ã/–¥–æ–ª–∂–Ω–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

- HR-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—å–µ—Ä—ã
- –ü–æ–¥–±–æ—Ä –æ–±—É—á–µ–Ω–∏—è

---

## 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 7.1 LMS Integration

**–¢–∏–ø:** –î–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω—è—è REST API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: LMS ‚Üí MegaCampusAI**

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º):**

```typescript
POST /api/courses/create
{
  topic: string
  description?: string
  documents?: File[]
  settings: {
    mode: 'auto' | 'semi-auto'
    language: string
    difficulty: string
    // ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  }
  callbackUrl?: string // –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤
}
‚Üí Response: { courseId, status }

GET /api/courses/:courseId/status
‚Üí Response: {
  courseId,
  status,
  progress: { step, percentage, message },
  needsApproval?: { stage, data } // –¥–ª—è semi-auto
}

POST /api/courses/:courseId/approve
{
  stage: 'analyze' | 'generate'
  approved: boolean
  changes?: object
}

GET /api/courses/:courseId/export
‚Üí Response: { course data in LMS-compatible format }
```

**–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: MegaCampusAI ‚Üí LMS**

**–í–µ–±—Ö—É–∫–∏ (–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º):**

```typescript
// –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω
POST {lms.callbackUrl}/course-status
{
  courseId: string
  status: 'generating' | 'needs_approval' | 'completed' | 'failed'
  progress: { step, percentage }
  data?: object
}

// –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ (semi-auto)
POST {lms.callbackUrl}/approval-required
{
  courseId: string
  stage: 'analyze' | 'generate'
  data: object // —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
}
```

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**

- API Key (Bearer token)
- HMAC –ø–æ–¥–ø–∏—Å—å –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤
- Rate limiting

**–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–∞:**

```typescript
interface CourseExport {
  id: string;
  title: string;
  description: string;
  metadata: {
    language: string;
    difficulty: string;
    estimatedDuration: number;
    // ...
  };
  structure: {
    sections: Array<{
      id: string;
      title: string;
      order: number;
      lessons: Array<{
        id: string;
        title: string;
        order: number;
        content: {
          text?: string;
          audio?: { url: string; duration: number };
          video?: { url: string; duration: number };
          presentation?: { url: string; slides: number };
        };
        quiz?: Quiz;
      }>;
    }>;
  };
}
```

### 7.2 OpenRouter

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

- –í—Å–µ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ OpenRouter
- –ê–¥–º–∏–Ω–∫–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∞–¥–º–∏–Ω–∫–∞):**

```typescript
interface AIConfig {
  embeddings: {
    provider: 'openai' | 'cohere' | ...
    model: string
  }
  summarization: {
    provider: string
    model: string
    fallback?: string
  }
  courseAnalysis: {
    provider: string
    model: string
  }
  contentGeneration: {
    provider: string
    model: string
    temperature: number
    maxTokens: number
  }
}
```

---

## 8. –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

### 8.1 –¢–∞—Ä–∏—Ñ–Ω–∞—è –º–æ–¥–µ–ª—å

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–∞—Ä–∏—Ñ–∞:**

```typescript
interface Plan {
  id: string;
  name: string;
  price: number; // —Ä—É–±/–º–µ—Å—è—Ü

  // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
  maxUsers: number; // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—â–∏—Ö—Å—è
  includedTokens: number; // —Ç–æ–∫–µ–Ω–æ–≤ –≤ –º–µ—Å—è—Ü

  // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
  queuePriority: 'low' | 'normal' | 'high';

  // –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
  features: {
    autoGeneration: boolean;
    semiAutoGeneration: boolean;
    aiAssistant: boolean;
    analytics: boolean;
    customBranding: boolean;
  };
}
```

**–¢–æ–∫–µ–Ω—ã:**

- –í–∫–ª—é—á–µ–Ω—ã –≤ —Ç–∞—Ä–∏—Ñ (–µ–∂–µ–º–µ—Å—è—á–Ω–æ)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–∫—É–ø–∫–∏ –ø–∞–∫–µ—Ç–æ–≤
- –°–ø–∏—Å–∞–Ω–∏–µ –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º:
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞: X —Ç–æ–∫–µ–Ω–æ–≤/1000 —Å–ª–æ–≤
  - –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Y —Ç–æ–∫–µ–Ω–æ–≤/–¥–æ–∫—É–º–µ–Ω—Ç
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ: Z —Ç–æ–∫–µ–Ω–æ–≤/–º–∏–Ω—É—Ç–∞
  - –∏ —Ç.–¥.

**–î–µ—Ç–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞:** –ü—Ä–æ–¥—É–º—ã–≤–∞–µ—Ç—Å—è –ø–æ–∑–∂–µ

### 8.2 –£—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**Tracking:**

- –í—Å–µ AI –≤—ã–∑–æ–≤—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –ü–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤ per organization
- –ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- Alerts –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É

---

## 9. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞—á–µ—Å—Ç–≤—É

### 9.1 –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

1. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** üî¥
   - 99.9% uptime (—Ü–µ–ª—å)
   - Graceful handling –æ—à–∏–±–æ–∫
   - Data integrity
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

2. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª** üü°
   - –ü–æ–ª–Ω–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ features
   - Extensibility –¥–ª—è –±—É–¥—É—â–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

3. **–°–∫–æ—Ä–æ—Å—Ç—å** üü¢
   - –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ (–æ–±—É—á–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç)
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
   - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –∏ —Ñ–∏–¥–±–µ–∫

### 9.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**Unit Tests:**

- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- –£—Ç–∏–ª–∏—Ç—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è

**Integration Tests:**

- Workflow end-to-end
- API endpoints
- Database –æ–ø–µ—Ä–∞—Ü–∏–∏

**E2E Tests:**

- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ user flows
- LMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**Load Tests:**

- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
- Bottleneck –≤—ã—è–≤–ª–µ–Ω–∏–µ

### 9.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (JSON)
- –£—Ä–æ–≤–Ω–∏: debug, info, warn, error
- Correlation IDs –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏

**–ú–µ—Ç—Ä–∏–∫–∏:**

- Queue sizes
- Processing times
- Error rates
- Token usage

**–ê–ª–µ—Ä—Ç—ã:**

- Queue overflow
- High error rate
- Token limit approaching
- System health

### 9.4 Security

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**

- Supabase Auth –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- API Keys –¥–ª—è LMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- HMAC –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**

- Row Level Security (Supabase)
- Role-based access
- Multi-tenancy isolation

**–î–∞–Ω–Ω—ã–µ:**

- Encryption at rest (Supabase)
- HTTPS –≤–µ–∑–¥–µ
- Secure file uploads

---

## 10. –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### 10.1 –§–∞–∑—ã

**–§–∞–∑–∞ 1: Foundation (–≠—Ç–∞–ø 1-2)**

- Main Entry ‚Üí Orchestrator
- Document Processing
- –ë–∞–∑–æ–≤–∞—è –∞–¥–º–∏–Ω–∫–∞

**–§–∞–∑–∞ 2: Core Workflows (–≠—Ç–∞–ø 3-4)**

- Summary Creation
- Course Analysis

**–§–∞–∑–∞ 3: Generation (–≠—Ç–∞–ø 5-6)**

- Structure Generation
- Text Generation

**–§–∞–∑–∞ 4: Integration**

- LMS API
- –†–µ–∂–∏–º semi-auto
- AI Assistant

**–§–∞–∑–∞ 5: Production Ready**

- Monitoring
- Performance optimization
- Load testing

### 10.2 –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:**

- –°—Ç–∞—Ä—ã–π MVP (n8n + —Å—Ç–∞—Ä—ã–π Supabase) ‚Üí –ù–µ —Ç—Ä–æ–≥–∞–µ–º
- –ù–æ–≤—ã–π Production (–∫–æ–¥ + –Ω–æ–≤—ã–π Supabase) ‚Üí –†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º
- –ü–µ—Ä–∏–æ–¥ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## 11. –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

### 11.1 –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è (–ø–æ workflow)

**–ù–∞ —ç—Ç–∞–ø–µ –∫–∞–∂–¥–æ–≥–æ workflow —Ä–µ—à–∞–µ–º:**

- [ ] –í—ã–±–æ—Ä AI –º–æ–¥–µ–ª–∏ –¥–ª—è –∑–∞–¥–∞—á–∏
- [ ] –ü—Ä–æ–º–ø—Ç –∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥
- [ ] –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (chunking, batching, retry)
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 11.2 –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã Langchain

- **LlamaIndex.js** - –¥–ª—è RAG –∏ —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- –î—Ä—É–≥–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞:**

- –ì–∏–±–∫–æ—Å—Ç—å –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ ecosystem
- –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## 12. –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 12.1 Immediate Actions

1. ‚úÖ –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –¢–ó
2. ‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –¢–ó –¥–ª—è **Workflow 1: Main Entry**
3. ‚è≥ –í—ã–±–æ—Ä orchestration –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (BullMQ vs Temporal)
4. ‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞
5. ‚è≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD –ø–∞–π–ø–ª–∞–π–Ω–∞

### 12.2 Workflow-specific –¢–ó

–î–ª—è –∫–∞–∂–¥–æ–≥–æ workflow —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–µ—Ç–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç:

- `TZ_Workflow_1_Main_Entry.md`
- `TZ_Workflow_2_Document_Processing.md`
- ...

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ workflow –¢–ó:**

1. –¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏
2. –í—Ö–æ–¥–Ω—ã–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
4. AI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–º–æ–¥–µ–ª–∏, –ø—Ä–æ–º–ø—Ç—ã)
5. –¢–µ—Å—Ç—ã
6. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### A. –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (Supabase Legacy)

> –°–º. —Å—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü
>
> **–î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ MCP:** `mcp__supabase-legacy__*`
>
> - `list_tables()` - —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
> - `execute_sql()` - –∑–∞–ø—Ä–æ—Å—ã –∫ —Å—Ç–∞—Ä–æ–π –ë–î
> - `list_migrations()` - –∏—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

### B. n8n Workflows JSON

> –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `/workflows n8n/` –¥–ª—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞
>
> **–î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ MCP:** `mcp__n8n-mcp__*`
>
> - `get_node_info()` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–æ–¥–∞—Ö
> - `search_nodes()` - –ø–æ–∏—Å–∫ –Ω–æ–¥ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
> - `get_node_documentation()` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–æ–¥
> - Workflows —Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ –≤ `/workflows n8n/`

### C. API –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

> TBD: OpenAPI/Swagger specs –¥–ª—è LMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

**–ö–æ–Ω–µ—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞**

_–í–µ—Ä—Å–∏—è: 1.1_
_–°–ª–µ–¥—É—é—â–∏–π review: –ü–æ—Å–ª–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –Ω–∞—á–∞–ª–∞ Workflow 1_
