# T074.1.1: –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ Docling MCP Server

**–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞**: T074.1 - –ê–Ω–∞–ª–∏–∑ Docling –¥–ª—è Document Processing Pipeline
**–¢–∏–ø –∑–∞–¥–∞—á–∏**: üîç Research (–§–∞–∑–∞ 1)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P2 - High
**–ê–≥–µ–Ω—Ç**: [infrastructure-specialist]
**–°–æ–∑–¥–∞–Ω–æ**: 2025-10-13
**–°—Ç–∞—Ç—É—Å**: üìã TODO
**–£—Å–∏–ª–∏—è**: 4 —á–∞—Å–∞

---

## 1. –¶–µ–ª—å –∑–∞–¥–∞—á–∏

**–ò–∑—É—á–∏—Ç—å Docling MCP Server** –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –±–∞–∑—É –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
- –ü–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É MCP protocol
- –ò–∑—É—á–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Docling MCP
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å deployment —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

**Deliverables**:
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
- ‚úÖ –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Python packages)
- ‚úÖ Deployment plan (Docker vs native)
- ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è T074.1.2 (Setup)

---

## 2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

### 2.1 –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Docling MCP

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã**:
- üìñ MCP Documentation: https://docling-project.github.io/docling/usage/mcp/
- üì¶ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/docling-project/docling-mcp
- üìã PyPI package: https://pypi.org/project/docling-mcp/
- üîß Integration guides: https://github.com/docling-project/docling-mcp/tree/main/docs/integrations

**–ß—Ç–æ –∏–∑—É—á–∏—Ç—å**:
1. MCP protocol basics (Message Control Protocol)
2. Available tools (conversion, generation, RAG)
3. Transport protocols (stdio, sse, streamable-http)
4. Configuration options
5. Resource requirements

### 2.2 Model Context Protocol (MCP)

**MCP Specification**:
- üåê Official site: https://modelcontextprotocol.io/
- üìö Specification: https://spec.modelcontextprotocol.io/
- üõ†Ô∏è SDK documentation: https://modelcontextprotocol.io/docs/tools

**–ß—Ç–æ –∏–∑—É—á–∏—Ç—å**:
1. MCP architecture (client-server model)
2. Message format (JSON-RPC 2.0)
3. Tool invocation pattern
4. Error handling
5. Authentication (if any)

### 2.3 TypeScript MCP Client

**SDK –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**:
- üì¶ NPM package: `@modelcontextprotocol/sdk`
- üìñ GitHub: https://github.com/modelcontextprotocol/typescript-sdk
- üìã Examples: https://github.com/modelcontextprotocol/servers

**–ß—Ç–æ –∏–∑—É—á–∏—Ç—å**:
1. Client initialization
2. Tool calling API
3. TypeScript types
4. Error handling patterns
5. Connection management

---

## 3. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

### 3.1 –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–í–æ–ø—Ä–æ—Å—ã**:
- [ ] –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è Python? (–∏–∑–≤–µ—Å—Ç–Ω–æ: 3.10+)
- [ ] –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º RAM?
- [ ] –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä—ë–º –¥–∏—Å–∫–∞? (ML –º–æ–¥–µ–ª–∏)
- [ ] CPU requirements (GPU –Ω—É–∂–µ–Ω?)
- [ ] OS compatibility (Linux, macOS, Windows)

**–ì–¥–µ –∏—Å–∫–∞—Ç—å**:
- pyproject.toml (dependencies)
- README.md (installation section)
- docs/installation –∏–ª–∏ similar

### 3.2 Transport Protocol –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–ª—É—á–∞—è

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏**:
1. **stdio** - –¥–ª—è desktop clients (Claude, LM Studio)
2. **sse** - Server-Sent Events (–¥–ª—è Llama Stack)
3. **streamable-http** - HTTP streaming (–¥–ª—è containers)

**–í–æ–ø—Ä–æ—Å—ã**:
- [ ] –ö–∞–∫–æ–π protocol –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è Node.js ‚Üî Python?
- [ ] –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç stdio transport (stdin/stdout)?
- [ ] –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç streamable-http (HTTP endpoints)?
- [ ] Performance comparison (latency, throughput)
- [ ] –ö–∞–∫–æ–π –ø—Ä–æ—â–µ –¥–ª—è Docker deployment?

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è**: `streamable-http` (HTTP –ø—Ä–æ—â–µ –¥–ª—è Node.js)

### 3.3 –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

**Docker vs Native**:
- [ ] –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Docker (–∏–∑–æ–ª—è—Ü–∏—è, dependencies)
- [ ] –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Native (performance, simplicity)
- [ ] Dockerfile requirements
- [ ] Docker Compose setup –¥–ª—è dev
- [ ] Health checks –¥–ª—è production

**–í–æ–ø—Ä–æ—Å—ã**:
- [ ] –ù—É–∂–µ–Ω –ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä?
- [ ] –ú–æ–∂–µ–º –ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ —Ç–æ–º –∂–µ Docker network —Å Node.js?
- [ ] –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å file sharing (uploaded docs)?
- [ ] Volume mounts –¥–ª—è /uploads/?

### 3.4 Configuration & Environment Variables

**–í–æ–ø—Ä–æ—Å—ã**:
- [ ] –ö–∞–∫–∏–µ environment variables –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è?
- [ ] –ö–∞–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å cache directory?
- [ ] –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å logging level?
- [ ] –ö–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å memory usage?
- [ ] Timeout settings?

**–ì–¥–µ –∏—Å–∫–∞—Ç—å**:
- Docling MCP source code (settings)
- CLI arguments (`--help`)
- Example configs –≤ docs/integrations/

### 3.5 Supported Document Formats

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ—á–Ω–æ**:
- [ ] PDF: –î–∞ (known)
- [ ] DOCX: –î–∞ (known)
- [ ] PPTX: –î–∞ (known)
- [ ] XLSX: –î–∞ (known)
- [ ] HTML: –î–∞ (known)
- [ ] Markdown: –î–∞ (known)
- [ ] Images (PNG, JPEG): –î–∞? (check)
- [ ] Audio (WAV, MP3): –î–∞? (check, –Ω–æ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ —Å–µ–π—á–∞—Å)

**Tier mapping**:
- Free tier: –Ω–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ (–Ω–µ –∫–∞—Å–∞–µ—Ç—Å—è MCP)
- Basic Plus: PDF, TXT, MD ‚Üí –≤—Å–µ supported?
- Standard: + DOCX, HTML, PPTX ‚Üí –≤—Å–µ supported?
- Premium: + PNG, JPG, GIF ‚Üí supported?

### 3.6 Output Formats

**–ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞–º**:
- [ ] JSON (DoclingDocument) - –¥–ª—è chunking
- [ ] Markdown - –¥–ª—è preview/export
- [ ] HTML - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- [ ] –§–æ—Ä–º–∞—Ç DoclingDocument (JSON schema)
- [ ] Metadata fields (page numbers, sections, tables)
- [ ] Image handling (embedded vs external)
- [ ] Table structure representation

### 3.7 Performance Characteristics

**–í–æ–ø—Ä–æ—Å—ã –¥–ª—è benchmark**:
- [ ] Latency –Ω–∞ 1-page PDF? (baseline)
- [ ] Latency –Ω–∞ 100-page PDF?
- [ ] Memory usage –Ω–∞ 100-page document?
- [ ] Parallel processing (multiple docs)?
- [ ] Bottlenecks (CPU, RAM, I/O)?

**–ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** (–¥–ª—è T074.1.2):
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å test documents (5, 10, 50, 100 pages)
- –ó–∞–ø—É—Å—Ç–∏—Ç—å benchmark
- –ò–∑–º–µ—Ä–∏—Ç—å latency, memory, CPU

### 3.8 Error Handling

**–°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è**:
- [ ] Invalid file format ‚Üí –∫–∞–∫–∞—è –æ—à–∏–±–∫–∞?
- [ ] Corrupted PDF ‚Üí fallback?
- [ ] Timeout –Ω–∞ –±–æ–ª—å—à–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ ‚Üí retry?
- [ ] Out of memory ‚Üí graceful degradation?
- [ ] OCR failures (scanned PDF) ‚Üí partial success?

**–ì–¥–µ –∏—Å–∫–∞—Ç—å**:
- Source code (exception classes)
- Examples (error handling patterns)
- Integration guides

### 3.9 Caching Strategy

**–í–æ–ø—Ä–æ—Å—ã**:
- [ ] –ö–µ—à–∏—Ä—É–µ—Ç –ª–∏ Docling MCP parsed results?
- [ ] –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è cache (filesystem)?
- [ ] –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è?
- [ ] Cache invalidation strategy?
- [ ] TTL –¥–ª—è –∫–µ—à–∞?

**–ó–∞—á–µ–º –Ω–∞–º**:
- –ò–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞
- –£—Å–∫–æ—Ä–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –°–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ CPU/RAM

### 3.10 Security Considerations

**–í–æ–ø—Ä–æ—Å—ã**:
- [ ] Sanitization –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤? (malicious PDFs)
- [ ] Resource limits (max file size)?
- [ ] Sandboxing (Docker –∏–∑–æ–ª—è—Ü–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ?)
- [ ] Secrets management (–µ—Å–ª–∏ –µ—Å—Ç—å API keys)
- [ ] CORS settings (–¥–ª—è HTTP transport)?

---

## 4. –ß–µ–∫–ª–∏—Å—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

### –§–∞–∑–∞ A: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (1.5 —á–∞—Å–∞)

- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å README.md Docling MCP
- [ ] –ò–∑—É—á–∏—Ç—å MCP protocol specification (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å)
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å integration examples (Claude Desktop, LM Studio)
- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å API reference (@modelcontextprotocol/sdk)
- [ ] –ò–∑—É—á–∏—Ç—å pyproject.toml (dependencies, optional features)

### –§–∞–∑–∞ B: Transport Protocol (1 —á–∞—Å)

- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å stdio vs streamable-http
- [ ] –ù–∞–π—Ç–∏ –ø—Ä–∏–º–µ—Ä—ã HTTP transport usage
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π transport –¥–ª—è –Ω–∞—à–µ–≥–æ —Å—Ç–µ–∫–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TypeScript client –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ transport

### –§–∞–∑–∞ C: Deployment Strategy (1 —á–∞—Å)

- [ ] –ò–∑—É—á–∏—Ç—å Docker deployment options
- [ ] –ù–∞–π—Ç–∏ –ø—Ä–∏–º–µ—Ä—ã Dockerfile (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å volume mounts (–¥–ª—è /uploads/)
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å network configuration (Docker network)
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å checklist –¥–ª—è Docker setup

### –§–∞–∑–∞ D: Technical Requirements (30 –º–∏–Ω—É—Ç)

- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (RAM, CPU, disk)
- [ ] –°–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (pip packages)
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å environment variables
- [ ] –°–æ—Å—Ç–∞–≤–∏—Ç—å deployment plan (—à–∞–≥ –∑–∞ —à–∞–≥–æ–º)
- [ ] –°–æ–∑–¥–∞—Ç—å deliverable –¥–æ–∫—É–º–µ–Ω—Ç

---

## 5. Deliverable: Technical Requirements Document

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞** (—Å–æ–∑–¥–∞—Ç—å –≤ –∫–æ–Ω—Ü–µ –∑–∞–¥–∞—á–∏):

### 5.1 System Requirements
- Python version
- RAM requirements
- Disk space (ML models)
- CPU/GPU requirements
- OS compatibility

### 5.2 Dependencies
- Core packages (docling-mcp, docling)
- Optional packages (OCR, VLM)
- TypeScript SDK (@modelcontextprotocol/sdk)

### 5.3 Transport Protocol Decision
- –í—ã–±—Ä–∞–Ω–Ω—ã–π protocol (stdio or streamable-http)
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞
- Configuration –ø—Ä–∏–º–µ—Ä—ã

### 5.4 Deployment Strategy
- Docker vs Native (—Ä–µ—à–µ–Ω–∏–µ)
- Docker setup (–µ—Å–ª–∏ Docker)
  - Base image
  - Volume mounts
  - Network configuration
  - Environment variables
- Health check strategy

### 5.5 Integration Architecture
```
[Node.js API (tRPC)]
        ‚Üì
[MCP Client (@modelcontextprotocol/sdk)]
        ‚Üì [HTTP/stdio]
[Docling MCP Server (Python, Docker)]
        ‚Üì
[File System: /uploads/]
```

### 5.6 File Processing Flow
```
1. User uploads file via tRPC endpoint (T057)
2. File saved to /uploads/{orgId}/{courseId}/{fileId}.{ext}
3. Metadata in file_catalog (vector_status=pending)
4. BullMQ job created ‚Üí DOCUMENT_PROCESSING
5. Worker calls MCP client ‚Üí Docling MCP Server
6. Docling parses document ‚Üí DoclingDocument JSON
7. Response ‚Üí Worker ‚Üí store parsed_content in file_catalog
8. vector_status ‚Üí indexing
9. Continue to T075 (chunking)
```

### 5.7 Performance Expectations
- Latency targets (1-page, 10-page, 100-page)
- Memory usage estimates
- Throughput (docs per hour)

### 5.8 Error Handling Strategy
- Invalid format errors
- Timeout handling
- Retry logic
- Fallback mechanisms

### 5.9 Security Considerations
- File sanitization
- Resource limits
- Docker isolation
- Secrets management

### 5.10 Next Steps Checklist (–¥–ª—è T074.1.2)
- [ ] Install Python 3.10+
- [ ] Install docling-mcp via pip/uvx
- [ ] Start MCP server locally
- [ ] Test with sample PDF
- [ ] Measure performance
- [ ] Document results

---

## 6. Tools and Resources

### 6.1 MCP Tools –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**Context7 MCP** (—É–∂–µ –µ—Å—Ç—å):
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
mcp__context7__get-library-docs
- Library: Docling MCP documentation
- Topics: setup, configuration, transport protocols
```

**GitHub MCP** (—É–∂–µ –µ—Å—Ç—å):
```bash
# –î–ª—è –∏–∑—É—á–µ–Ω–∏—è –∫–æ–¥–∞
mcp__github__get_file_contents
- Repo: docling-project/docling-mcp
- Files: README.md, pyproject.toml, examples/
```

### 6.2 –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

**–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ Python –µ—Å—Ç—å)**:
```bash
# Via uvx (recommended)
uvx --from docling-mcp docling-mcp-server --help

# Check available transports
uvx --from docling-mcp docling-mcp-server --transport stdio
uvx --from docling-mcp docling-mcp-server --transport streamable-http

# Check version
uvx --from docling-mcp docling-mcp-server --version
```

**Docker exploration**:
```bash
# Search for official Docker images
docker search docling

# Check if Dockerfile exists in repo
# (via GitHub MCP or direct check)
```

---

## 7. Success Criteria

**–ó–∞–¥–∞—á–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –∫–æ–≥–¥–∞**:
1. ‚úÖ –í—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑—É—á–µ–Ω–∞ (—Ä–∞–∑–¥–µ–ª—ã 2.1-2.3)
2. ‚úÖ –í—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω—ã (—Ä–∞–∑–¥–µ–ª 3)
3. ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à—ë–Ω (—Ä–∞–∑–¥–µ–ª 4)
4. ‚úÖ Technical Requirements Document —Å–æ–∑–¥–∞–Ω (—Ä–∞–∑–¥–µ–ª 5)
5. ‚úÖ Deployment strategy –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ (Docker or Native)
6. ‚úÖ Transport protocol –≤—ã–±—Ä–∞–Ω (stdio or streamable-http)
7. ‚úÖ Next steps checklist –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –¥–ª—è T074.1.2

**Output —Ñ–∞–π–ª**: `/home/me/code/megacampus2/docs/T074.1.1-TECHNICAL-REQUIREMENTS.md`

---

## 8. –†–∏—Å–∫–∏ –∏ –±–ª–æ–∫–µ—Ä—ã

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–†–∏—Å–∫ 1**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ–ø–æ–ª–Ω–∞—è
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ò–∑—É—á–∏—Ç—å source code –Ω–∞–ø—Ä—è–º—É—é
- **Fallback**: –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –≤ GitHub Discussions

**–†–∏—Å–∫ 2**: Transport protocol –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—à–µ–≥–æ —Å—Ç–µ–∫–∞
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ (stdio, sse, http)
- **Fallback**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å REST API wrapper (–í–∞—Ä–∏–∞–Ω—Ç B)

**–†–∏—Å–∫ 3**: –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–µ
- **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø—Ü–∏–∏ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è memory usage
- **Fallback**: Cloud hosting –¥–ª—è MCP server

---

## 9. Timeline

**–û–±—â–µ–µ –≤—Ä–µ–º—è**: 4 —á–∞—Å–∞

| –§–∞–∑–∞ | –ó–∞–¥–∞—á–∏ | –í—Ä–µ–º—è |
|------|--------|-------|
| A: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –ß—Ç–µ–Ω–∏–µ README, MCP spec, examples | 1.5—á |
| B: Transport | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ protocols, –≤—ã–±–æ—Ä | 1—á |
| C: Deployment | Docker strategy, setup plan | 1—á |
| D: Deliverable | Technical Requirements Doc | 0.5—á |

**–ù–∞—á–∞–ª–æ**: –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è
**–ö–æ–Ω–µ—Ü**: –ß–µ—Ä–µ–∑ 4 —á–∞—Å–∞ (–∏–ª–∏ 1 —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å)

---

## 10. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**Immediate next task**: T074.1.2 - Setup Docling MCP Server –ª–æ–∫–∞–ª—å–Ω–æ

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
- T074.1.2 —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç—Ç–æ–π –∑–∞–¥–∞—á–∏
- Technical Requirements Doc ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è setup
- Deployment strategy ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ setup

**–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è**:
- Report findings –∫ —Ç–µ–±–µ (user)
- –ü–æ–ª—É—á–∏—Ç—å approval –Ω–∞ deployment strategy
- –ù–∞—á–∞—Ç—å T074.1.2 –ø–æ—Å–ª–µ approval

---

## 11. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞

**–£–∂–µ –µ—Å—Ç—å**:
- ‚úÖ File upload endpoint (T057)
- ‚úÖ BullMQ job queue (T034-T044)
- ‚úÖ PostgreSQL file_catalog table
- ‚úÖ Qdrant vector storage (T071-T073)
- ‚úÖ MCP infrastructure (Context7, Supabase, etc.)

**–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç**:
- ‚è≥ Document parsing (—ç—Ç–∞ –∑–∞–¥–∞—á–∞!)
- ‚è≥ Chunking strategy (T075)
- ‚è≥ Embedding generation (T076)
- ‚è≥ Vector upload (T077)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏

**Docling MCP –≤—Ö–æ–¥–∏—Ç —Å—é–¥–∞**:
```
[File Upload] ‚Üí [file_catalog: pending]
                      ‚Üì
              [BullMQ: DOCUMENT_PROCESSING job]
                      ‚Üì
              [Worker calls MCP Client]  ‚Üê DOCLING MCP HERE
                      ‚Üì
              [DoclingDocument JSON]
                      ‚Üì
              [Store in file_catalog.parsed_content]
                      ‚Üì
              [vector_status ‚Üí indexing]
                      ‚Üì
              [Continue to chunking...]
```

**–ö—Ä–∏—Ç–∏—á–Ω–æ –ø–æ–Ω—è—Ç—å**:
- –§–æ—Ä–º–∞—Ç DoclingDocument (–¥–ª—è T075 chunking)
- Latency (–¥–ª—è BullMQ timeout –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- Memory usage (–¥–ª—è Docker limits)
- Error modes (–¥–ª—è retry logic)

---

## 12. References

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Å—ã–ª–∫–∏**:
- üîó Docling MCP GitHub: https://github.com/docling-project/docling-mcp
- üîó MCP Protocol: https://modelcontextprotocol.io/
- üîó TypeScript SDK: https://github.com/modelcontextprotocol/typescript-sdk
- üîó Docling Library: https://github.com/docling-project/docling
- üîó Parent Analysis: /home/me/code/megacampus2/docs/T074.1-DOCLING-ANALYSIS.md

**Related Tasks**:
- üìã T074: Configure Jina-v3 embeddings API client (original task)
- üìã T074.1: Docling Analysis (parent task)
- üìã T074.1.2: Setup Docling MCP Server (next task)
- üìã T075: Document chunking strategy (depends on this)
- üìã T076: Embedding generation service (depends on this)

---

**–°—Ç–∞—Ç—É—Å**: üìã TODO
**Assignee**: [infrastructure-specialist]
**Created**: 2025-10-13
**Updated**: 2025-10-13
